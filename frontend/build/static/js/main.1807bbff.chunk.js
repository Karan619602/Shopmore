(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{154:function(e,t,r){"use strict";r.r(t);var a=r(6),c=r(2),n=r(21),s=r.n(n),o=r(8),i=r.n(o),l=r(13),d=r(12),u=r(11),j=r(17),b="LOGIN_REQUEST",p="LOGIN_SUCCESS",m="LOGIN_FAIL",O="REGISTER_USER_REQUEST",h="REGISTER_USER_SUCCESS",f="REGISTER_USER_FAIL",x="LOAD_USER_REQUEST",g="LOAD_USER_SUCCESS",v="LOAD_USER_FAIL",y="LOGOUT_SUCCESS",N="LOGOUT_FAIL",_="UPDATE_PROFILE_REQUEST",S="UPDATE_PROFILE_SUCCESS",w="UPDATE_PROFILE_FAIL",E="UPDATE_PROFILE_RESET",C="FORGOT_PASSWORD_REQUEST",R="FORGOT_PASSWORD_SUCCESS",k="FORGOT_PASSWORD_FAIL",I="RESET_PASSWORD_REQUEST",P="RESET_PASSWORD_SUCCESS",F="RESET_PASSWORD_FAIL",A="CLEAR_ERRORS",T=r(18),L=r.n(T),D=function(){return function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:A});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=r(7),q=r(15),M=r(3),G=function(){return Object(M.jsx)("div",{className:"loader"})},Q=r(77),J=function(e){var t=e.title;return Object(M.jsx)(Q.a,{children:Object(M.jsx)("title",{children:"".concat(t,"-Shopmore")})})},W=function(e){var t=e.history,r=Object(c.useState)(""),a=Object(d.a)(r,2),n=a[0],s=a[1],o=Object(c.useState)(""),j=Object(d.a)(o,2),O=j[0],h=j[1],f=Object(q.d)(),x=Object(U.b)(),g=Object(U.c)((function(e){return e.auth})),v=g.isAuthenicated,y=g.loading,N=g.error;Object(c.useEffect)((function(){v&&t.push("/"),N&&x(D())}),[x,f,v,N,t]);return Object(M.jsx)(c.Fragment,{children:y?Object(M.jsx)(G,{}):Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:"Login"}),Object(M.jsx)("div",{className:"row wrapper",children:Object(M.jsx)("div",{className:"col-10 col-lg-5",children:Object(M.jsxs)("form",{className:"shadow-lg",onSubmit:function(e){e.preventDefault(),x(function(e,t){return function(){var r=Object(l.a)(i.a.mark((function r(a){var c,n,s;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:b}),c={headers:{"Content-Type":"application/json"}},r.next=5,L.a.post("/api/v1/login",{email:e,password:t},c);case 5:n=r.sent,s=n.data,a({type:p,payload:s.user}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),a({type:m,payload:r.t0.response.data.message});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()}(n,O))},children:[Object(M.jsx)("h1",{className:"mb-3 login",children:"Login"}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"email_field",children:"Email"}),Object(M.jsx)("input",{type:"email",id:"email_field",className:"form-control",value:n,onChange:function(e){return s(e.target.value)}})]}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"password_field",children:"Password"}),Object(M.jsx)("input",{type:"password",id:"password_field",className:"form-control",value:O,onChange:function(e){return h(e.target.value)}})]}),Object(M.jsx)("button",{id:"login_button",type:"submit",className:"btn btn-block py-3 buttoncolor",children:"LOGIN"}),Object(M.jsx)(u.b,{to:"/registers",className:"float-right mt-3",children:"New User?"})]})})})]})})},Y=function(e){var t=e.history,r=Object(c.useState)(""),a=Object(d.a)(r,2),n=a[0],s=a[1],o=Object(c.useState)(""),u=Object(d.a)(o,2),j=u[0],b=u[1],p=Object(c.useState)(""),m=Object(d.a)(p,2),x=m[0],g=m[1],v=Object(q.d)(),y=Object(U.b)(),N=Object(U.c)((function(e){return e.auth})),_=N.isAuthenicated,S=N.loading,w=N.error;Object(c.useEffect)((function(){_&&t.push("/"),w&&y(D())}),[y,v,_,w,t]);return Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:"Register user"}),Object(M.jsx)("div",{className:"row wrapper",children:Object(M.jsx)("div",{className:"col-10 col-lg-5",children:Object(M.jsxs)("form",{className:"shadow-lg",onSubmit:function(e){e.preventDefault(),console.log(x),console.log(n),console.log(j),y(function(e,t,r){return function(){var a=Object(l.a)(i.a.mark((function a(c){var n,s,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),console.log(r),console.log(t),a.prev=3,c({type:O}),n={headers:{"Content-Type":"application/json"}},a.next=8,L.a.post("/api/v1/register",{name:e,email:t,password:r},n);case 8:s=a.sent,o=s.data,c({type:h,payload:o.user}),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(3),c({type:f,payload:a.t0.response.data.message});case 16:case"end":return a.stop()}}),a,null,[[3,13]])})));return function(e){return a.apply(this,arguments)}}()}(x,n,j))},children:[Object(M.jsx)("h1",{className:"mb-3",children:"Register"}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"email_field",children:"Name"}),Object(M.jsx)("input",{type:"name",id:"name_field",className:"form-control",name:"name",value:x,onChange:function(e){return g(e.target.value)}})]}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"email_field",children:"Email"}),Object(M.jsx)("input",{type:"email",id:"email_field",className:"form-control",name:"email",value:n,onChange:function(e){return s(e.target.value)}})]}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"password_field",children:"Password"}),Object(M.jsx)("input",{type:"password",id:"password_field",className:"form-control",name:"password",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(M.jsx)("button",{id:"register_button",type:"submit",className:"btn btn-block py-3",disabled:!!S,children:"REGISTER"})]})})})]})},B=function(){var e=Object(U.c)((function(e){return e.auth})),t=e.user,r=e.loading;return Object(M.jsx)(c.Fragment,{children:r?Object(M.jsx)(G,{}):Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:"Your Profile"}),Object(M.jsx)("h2",{className:"mt-5 ml-5",children:"My Profile"}),Object(M.jsx)("div",{className:"row justify-content-around mt-5 user-info",children:Object(M.jsxs)("div",{className:"col-12 col-md-5",children:[Object(M.jsx)("h4",{children:"Full Name"}),Object(M.jsx)("p",{children:t.name}),Object(M.jsx)("h4",{children:"Email Address"}),Object(M.jsx)("p",{children:t.email}),Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),"admin"!==t.role&&Object(M.jsx)(u.b,{to:"/orders/me",className:"btn btn-danger btn-block mt-5",children:"My Orders"})]})})]})})},V=r(99),z=["component"],H=function(e){var t=e.component,r=Object(V.a)(e,z),n=Object(U.c)((function(e){return e.auth})),s=n.isAuthenicated,o=n.loading;return Object(M.jsx)(c.Fragment,{children:!1===o&&Object(M.jsx)(j.b,Object(a.a)(Object(a.a)({},r),{},{render:function(e){return!1===s?Object(M.jsx)(j.a,{to:"/login"}):Object(M.jsx)(t,Object(a.a)({},e))}}))})},K=function(e){var t=e.history,r=Object(c.useState)(""),a=Object(d.a)(r,2),n=a[0],s=a[1];return Object(M.jsx)("form",{onSubmit:function(e){e.preventDefault(),n.trim()?t.push("/search/".concat(n)):t.push("/")},children:Object(M.jsxs)("div",{className:"input-group",children:[Object(M.jsx)("input",{type:"text",id:"search_field",className:"form-control",placeholder:"Enter Product Name ...",onChange:function(e){return s(e.target.value)}}),Object(M.jsx)("div",{className:"input-group-append",children:Object(M.jsx)("button",{id:"search_btn",className:"btn",children:Object(M.jsx)("i",{className:"fa fa-search","aria-hidden":"true"})})})]})})},X=r(81),Z=r.n(X),$=r(80),ee=r.n($),te=(r(63),function(){var e=Object(q.d)(),t=Object(U.b)(),r=Object(U.c)((function(e){return e.cart})).cartItems,a=Object(U.c)((function(e){return e.auth})),n=a.user,s=a.loading;return Object(M.jsx)(c.Fragment,{children:Object(M.jsxs)("nav",{className:"navbar row naviga",children:[Object(M.jsx)("div",{className:"col-12 col-md-3 mt-md-0 ",children:Object(M.jsx)("div",{className:"navbar-brand",children:Object(M.jsx)(u.b,{to:"/",children:Object(M.jsx)(ee.a,{className:"homebutton"})})})}),Object(M.jsx)("div",{className:"col-12 col-md-6 mt-2 ",children:Object(M.jsx)(j.b,{render:function(e){var t=e.history;return Object(M.jsx)(K,{history:t})}})}),Object(M.jsxs)("div",{className:"col-12 col-md-3 mt-4 mt-md-0 text-center",children:[Object(M.jsxs)(u.b,{to:"/cart",children:[Object(M.jsx)("span",{id:"cart",className:"ml-3",children:Object(M.jsx)(Z.a,{})}),Object(M.jsx)("span",{className:"ml-1",id:"cart_count",children:r.length})]}),n?Object(M.jsxs)("div",{className:"ml-4 dropdown d-inline",children:[Object(M.jsx)(u.b,{to:"#!",className:"btn dropdown-toggle text-white mr-4",type:"button",id:"dropDownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(M.jsx)("span",{children:n&&n.name})}),Object(M.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropDownMenuButton",children:[n&&"admin"===n.role&&Object(M.jsx)(u.b,{className:"dropdown-item",to:"/dashboard",children:"Dashboard"}),Object(M.jsx)(u.b,{className:"dropdown-item",to:"/orders/me",children:"Orders"}),Object(M.jsx)(u.b,{className:"dropdown-item",to:"/me",children:"Profile"}),Object(M.jsx)(u.b,{className:"dropdown-item text-danger",to:"/",onClick:function(){t(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("/api/v1/logout");case 3:t({type:y}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t({type:N,payload:e.t0.response.data.message});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),e.success("logout successfully"),r.length=0},children:"Logout"})]})]}):!s&&Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(u.b,{to:"/login",id:"login_btn",children:"Login"}),Object(M.jsx)(u.b,{to:"/registers",id:"signup_btn",children:"signup"})]})]})]})})}),re=function(){return Object(M.jsx)(c.Fragment,{children:Object(M.jsx)("footer",{className:"py-1 footer",children:Object(M.jsx)("p",{className:"text-center mt-1 ",children:"Shopping Cart - 2021-2022, All Rights Reserved"})})})},ae=r(82),ce=r.n(ae),ne="ALL_PRODUCTS_REQUESTS",se="ALL_PRODUCTS_SUCCESS",oe="ALL_PRODUCTS_FAIL",ie="CLEAR_ERRORS",le="ALL_PRODUCTS_REQUESTS",de="ALL_PRODUCTS_SUCCESS",ue="ALL_PRODUCTS_FAIL",je=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:ie});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(e){var t=e.product;return Object(M.jsx)("div",{className:"col-sm-12 col-md-6 col-lg- my-3",children:Object(M.jsxs)("div",{className:"card p-3 rounded",children:[Object(M.jsx)("img",{className:"card-img-top mx-auto",src:t.images[0].url,alt:""}),Object(M.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(M.jsx)("h5",{className:"card-title",children:Object(M.jsx)(u.b,{to:"/product/".concat(t._id),children:t.name})}),Object(M.jsx)("div",{className:"ratings mt-auto"}),Object(M.jsxs)("p",{className:"card-text",children:["\u20b9",t.price]}),Object(M.jsx)(u.b,{to:"/product/".concat(t._id),id:"view_btn",className:"btn btn-block",children:"View Details"})]})]})})},pe=function(e){var t=e.match,r=Object(c.useState)(1),a=Object(d.a)(r,2),n=a[0],s=a[1],o=Object(q.d)(),u=Object(U.b)(),j=Object(U.c)((function(e){return e.products})),b=j.loading,p=j.Products,m=j.error,O=j.productsCount,h=j.resPerPage,f=t.params.keyword;return Object(c.useEffect)((function(){if(m)return o.error(m);u(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var r=Object(l.a)(i.a.mark((function r(a){var c,n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:ne}),r.next=4,L.a.get("/api/v1/products?keyword=".concat(e,"&page=").concat(t));case 4:c=r.sent,n=c.data,a({type:se,payload:n}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),a({type:oe,payload:r.t0.response.data.message});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(f,n))}),[u,o,m,f,n]),Object(M.jsx)(c.Fragment,{children:b?Object(M.jsx)(G,{}):Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:"Buy best products"}),Object(M.jsx)("h1",{id:"products_heading",children:" Products"}),Object(M.jsx)("section",{id:"products",className:" container mt-10 change",children:Object(M.jsx)("div",{className:"row ",children:p&&p.map((function(e){return Object(M.jsx)(be,{product:e},e._id)}))})}),h<=O&&Object(M.jsx)("div",{className:"d-flex justify-content-center mt-5 pagination",children:Object(M.jsx)(ce.a,{activePage:n,itemsCountPerPage:h,totalItemsCount:O,onChange:function(e){s(e)},nextPageText:"Next",prevPageText:"Prev",firstPageText:"First",lastPageText:"Last",itemClass:"page-item",linkClass:"page-link"})})]})})},me=r(172),Oe=r(86),he="ADD_TO_CART",fe="REMOVE_TO_CART",xe="SAVE_SHIPPING_INFO",ge=function(e,t){return function(){var r=Object(l.a)(i.a.mark((function r(a,c){var n,s;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L.a.get("/api/v1/product/".concat(e));case 2:n=r.sent,s=n.data,a({type:he,payload:{product:s.product._id,name:s.product.name,price:s.product.price,image:s.product.images[0].url,stock:s.product.stock,quantity:t}}),localStorage.setItem("cartItems",JSON.stringify(c().cart.cartItems));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},ve=function(e){var t=e.match,r=e.history,a=Object(c.useState)(1),n=Object(d.a)(a,2),s=n[0],o=n[1],u=Object(U.b)(),j=Object(U.c)((function(e){return e.productDetails})),b=j.loading,p=j.error,m=j.product,O=Object(U.c)((function(e){return e.auth})).isAuthenicated,h=Object(q.d)();Object(c.useEffect)((function(){var e;p&&(h.error(p),u(je())),u((e=t.params.id,function(){var t=Object(l.a)(i.a.mark((function t(r){var a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:le}),t.next=4,L.a.get("/api/v1/product/".concat(e));case 4:a=t.sent,c=a.data,r({type:de,payload:c.product}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:ue,payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[u,h,p,t.params.id]);return Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:m.name}),b?Object(M.jsx)(G,{}):Object(M.jsx)(c.Fragment,{children:Object(M.jsxs)("div",{className:"row f-flex justify-content-around",children:[Object(M.jsx)("div",{className:"col-12 col-lg-5 img-fluid ",id:"product_image",children:Object(M.jsx)(me.a,{pause:"hover",className:"imagesize",children:m.images&&m.images.map((function(e){return Object(M.jsx)(Oe.a,{children:Object(M.jsx)("img",{className:"d-block w-100 ",src:e.url,alt:m.title})},e.public_id)}))})}),Object(M.jsxs)("div",{className:"col-12 col-lg-5 mt-5",children:[Object(M.jsx)("h3",{children:m.name}),Object(M.jsxs)("p",{id:"product_id",children:["Product # ",m._id]}),Object(M.jsxs)("p",{id:"product_price",children:["\u20b9",m.price]}),Object(M.jsxs)("div",{className:"stockCounter d-inline",children:[Object(M.jsx)("span",{className:"btn btn-danger minus",onClick:function(){var e=document.querySelector(".count");if(!(e.valueAsNumber<=1)){var t=e.valueAsNumber-1;o(t)}},children:"-"}),Object(M.jsx)("input",{type:"number",className:"form-control count d-inline",value:s,readOnly:!0}),Object(M.jsx)("span",{className:"btn btn-primary plus",onClick:function(){var e=document.querySelector(".count");if(!(e.valueAsNumber>=m.stock)){var t=e.valueAsNumber+1;o(t)}},children:"+"})]}),Object(M.jsx)("button",{type:"button",id:"cart_btn",className:"btn btn-primary d-inline ml-4",disabled:0===m.stock,onClick:function(){O?(u(ge(t.params.id,s)),h.success("item added to cart")):(r.push("/login"),h.error("Please login before add product to cart"))},children:"Add to Cart"}),Object(M.jsx)("hr",{}),Object(M.jsxs)("p",{children:["Status: ",Object(M.jsx)("span",{id:"stock_status",className:m.stock>0?"greenColor":"redColor",children:m.stock>0?"In Stock":"out of stock"})]}),Object(M.jsx)("hr",{}),Object(M.jsx)("h4",{className:"mt-2",children:"Description:"}),Object(M.jsx)("p",{children:m.description}),Object(M.jsx)("hr",{}),Object(M.jsxs)("p",{id:"product_seller mb-3",children:["Sold by: ",Object(M.jsx)("strong",{children:m.seller})]}),Object(M.jsx)("div",{className:"row mt-2 mb-5",children:Object(M.jsx)("div",{className:"rating w-50",children:Object(M.jsx)("div",{className:"modal fade",id:"ratingModal",tabIndex:"-1",role:"dialog","aria-labelledby":"ratingModalLabel","aria-hidden":"true",children:Object(M.jsx)("div",{className:"modal-dialog",role:"document",children:Object(M.jsxs)("div",{className:"modal-content",children:[Object(M.jsxs)("div",{className:"modal-header",children:[Object(M.jsx)("h5",{className:"modal-title",id:"ratingModalLabel",children:"Submit Review"}),Object(M.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(M.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(M.jsxs)("div",{className:"modal-body",children:[Object(M.jsxs)("ul",{className:"stars",children:[Object(M.jsx)("li",{className:"star",children:Object(M.jsx)("i",{className:"fa fa-star"})}),Object(M.jsx)("li",{className:"star",children:Object(M.jsx)("i",{className:"fa fa-star"})}),Object(M.jsx)("li",{className:"star",children:Object(M.jsx)("i",{className:"fa fa-star"})}),Object(M.jsx)("li",{className:"star",children:Object(M.jsx)("i",{className:"fa fa-star"})}),Object(M.jsx)("li",{className:"star",children:Object(M.jsx)("i",{className:"fa fa-star"})})]}),Object(M.jsx)("textarea",{name:"review",id:"review",className:"form-control mt-3"}),Object(M.jsx)("button",{className:"btn my-3 float-right review-btn px-4 text-white","data-dismiss":"modal","aria-label":"Close",children:"Submit"})]})]})})})})})]})]})})]})},ye=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1],n=Object(q.d)(),s=Object(U.b)(),o=Object(U.c)((function(e){return e.forgotpassword})),u=o.error,j=o.loading,b=o.message;Object(c.useEffect)((function(){u&&(n.error(u),s(D())),b&&n.success(b)}),[s,n,u,b]);return Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:"Forgot Password"}),Object(M.jsx)("div",{className:"row wrapper",children:Object(M.jsx)("div",{className:"col-10 col-lg-5",children:Object(M.jsxs)("form",{className:"shadow-lg",onSubmit:function(e){e.preventDefault();var t=new FormData;t.set("email",r),s(function(e){return function(){var t=Object(l.a)(i.a.mark((function t(r){var a,c,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:C}),a={headers:{"Content-Type":"application/json"}},t.next=5,L.a.post("/api/v1/password/forgot",e,a);case 5:c=t.sent,n=c.data,r({type:R,payload:n.message}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),r({type:k,payload:t.t0.response.data.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))},children:[Object(M.jsx)("h1",{className:"mb-3",children:"Forgot Password"}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"email_field",children:"Enter Email"}),Object(M.jsx)("input",{type:"email",id:"email_field",className:"form-control",value:r,onChange:function(e){return a(e.target.value)}})]}),Object(M.jsx)("button",{id:"forgot_password_button",type:"submit",className:"btn btn-block py-3",disabled:!!j,children:"Send Email"})]})})})]})},Ne=function(e){var t=e.history,r=e.match,a=Object(c.useState)(""),n=Object(d.a)(a,2),s=n[0],o=n[1],u=Object(c.useState)(""),j=Object(d.a)(u,2),b=j[0],p=j[1],m=Object(q.d)(),O=Object(U.b)(),h=Object(U.c)((function(e){return e.forgotpassword})),f=h.error,x=h.success;Object(c.useEffect)((function(){f&&(m.error(f),O(D())),x&&(m.success("password updated successfully"),t.push("/login"))}),[O,m,f,x,t]);return Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:" New Password Reset"}),Object(M.jsx)("div",{className:"row wrapper",children:Object(M.jsx)("div",{className:"col-10 col-lg-5",children:Object(M.jsxs)("form",{className:"shadow-lg",onSubmit:function(e){e.preventDefault();var t,a,c=new FormData;c.set("password",s),c.set("confirmpassword",b),O((t=r.params.token,a=c,function(){var e=Object(l.a)(i.a.mark((function e(r){var c,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:I}),c={headers:{"Content-Type":"application/json"}},e.next=5,L.a.put("/api/v1/password/reset/".concat(t),a,c);case 5:n=e.sent,s=n.data,r({type:P,payload:s.message}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r({type:F,payload:e.t0.response.data.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(M.jsx)("h1",{className:"mb-3",children:"New Password"}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"password_field",children:"Password"}),Object(M.jsx)("input",{type:"password",id:"password_field",className:"form-control",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"confirm_password_field",children:"Confirm Password"}),Object(M.jsx)("input",{type:"password",id:"confirm_password_field",className:"form-control",value:b,onChange:function(e){return p(e.target.value)}})]}),Object(M.jsx)("button",{id:"new_password_button",type:"submit",className:"btn btn-block py-3",children:"Set Password"})]})})})]})},_e=function(e){var t=e.history,r=Object(U.b)(),a=Object(U.c)((function(e){return e.cart})).cartItems,n=Object(U.c)((function(e){return e.auth})).isAuthenicated,s=function(e){r(function(e){return function(){var t=Object(l.a)(i.a.mark((function t(r,a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:fe,payload:e}),localStorage.setItem("cartItems",JSON.stringify(a().cart.cartItems));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(e))};return Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:"Your Cart"}),0===a.length?Object(M.jsx)("h2",{className:"mt-5",children:"Your Cart is Empty"}):Object(M.jsxs)(c.Fragment,{children:[Object(M.jsxs)("h2",{className:"mt-5",children:["Your Cart: ",Object(M.jsxs)("b",{children:[1===a.length?"".concat(a.length," item"):"".concat(a.length," items")," "]})]}),Object(M.jsxs)("div",{className:"row d-flex justify-content-between",children:[Object(M.jsx)("div",{className:"col-12 col-lg-8",children:a.map((function(e){return Object(M.jsx)(c.Fragment,{children:Object(M.jsx)("div",{className:"cart-item",children:Object(M.jsxs)("div",{className:"row",children:[Object(M.jsx)("div",{className:"col-4 col-lg-3",children:Object(M.jsx)("img",{src:e.image,alt:"Laptop",height:"90",width:"115"})}),Object(M.jsx)("div",{className:"col-5 col-lg-3",children:Object(M.jsx)(u.b,{to:"/product/".concat(e.product),children:e.name})}),Object(M.jsx)("div",{className:"col-4 col-lg-2 mt-4 mt-lg-0",children:Object(M.jsxs)("p",{id:"card_item_price",children:["\u20b9",e.price]})}),Object(M.jsx)("div",{className:"col-4 col-lg-3 mt-4 mt-lg-0",children:Object(M.jsxs)("div",{className:"stockCounter d-inline",children:[Object(M.jsx)("span",{className:"btn btn-danger minus",onClick:function(){return function(e,t){var a=t-1;a<=0||r(ge(e,a))}(e.product,e.quantity)},children:"-"}),Object(M.jsx)("input",{type:"number",className:"form-control count d-inline",value:e.quantity,readOnly:!0}),Object(M.jsx)("span",{className:"btn btn-primary plus",onClick:function(){return function(e,t,a){var c=t+1;c>a||r(ge(e,c))}(e.product,e.quantity,e.stock)},children:"+"})]})}),Object(M.jsx)("div",{className:"col-4 col-lg-1 mt-4 mt-lg-0",children:Object(M.jsx)("i",{id:"delete_cart_item",className:"fa fa-trash btn btn-danger",onClick:function(){return s(e.product)}})})]})})},e.product)}))}),Object(M.jsx)("div",{className:"col-10 col-lg-3 my-4",children:Object(M.jsxs)("div",{id:"order_summary",children:[Object(M.jsx)("h4",{children:"Order Summary"}),Object(M.jsxs)("p",{children:["Subtotal:  ",Object(M.jsxs)("span",{className:"order-summary-values",children:[a.reduce((function(e,t){return e+Number(t.quantity)}),0)," (Units)"]})]}),Object(M.jsxs)("p",{children:["Est. total: ",Object(M.jsxs)("span",{className:"order-summary-values",children:["\u20b9",a.reduce((function(e,t){return e+t.quantity*t.price}),0).toFixed(2)]})]}),Object(M.jsx)("button",{onClick:function(){n?t.push("/shipping"):t.push("/login")},id:"checkout_btn",className:"btn btn-primary btn-block",children:"Check out"})]})})]})]})]})},Se=function(e){var t=e.history,r=Object(U.c)((function(e){return e.cart})),a=r.cartItems,n=r.shippinginfo,s=Object(U.b)(),o=Object(c.useState)(n.address),u=Object(d.a)(o,2),j=u[0],b=u[1],p=Object(c.useState)(n.city),m=Object(d.a)(p,2),O=m[0],h=m[1],f=Object(c.useState)(n.postalCode),x=Object(d.a)(f,2),g=x[0],v=x[1],y=Object(c.useState)(n.phoneNo),N=Object(d.a)(y,2),_=N[0],S=N[1];return Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:"Shipping info"}),Object(M.jsx)("div",{className:"row wrapper",children:Object(M.jsx)("div",{className:"col-10 col-lg-5",children:Object(M.jsxs)("form",{className:"shadow-lg",onSubmit:function(e){var r;e.preventDefault(),s((r={address:j,city:O,postalCode:g,phoneNo:_},function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:xe,payload:r}),localStorage.setItem("shippinginfo",JSON.stringify(r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.push("/payment")},children:[Object(M.jsx)("h1",{className:"mb-4",children:"Shipping Info"}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"address_field",children:"Address"}),Object(M.jsx)("input",{type:"text",id:"address_field",className:"form-control",value:j,onChange:function(e){return b(e.target.value)},required:!0})]}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"city_field",children:"City"}),Object(M.jsx)("input",{type:"text",id:"city_field",className:"form-control",required:!0,value:O,onChange:function(e){return h(e.target.value)}})]}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"phone_field",children:"Phone No"}),Object(M.jsx)("input",{type:"phone",id:"phone_field",className:"form-control",value:_,onChange:function(e){return S(e.target.value)},required:!0})]}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"postal_code_field",children:"Postal Code"}),Object(M.jsx)("input",{type:"number",id:"postal_code_field",className:"form-control",value:g,onChange:function(e){return v(e.target.value)},required:!0})]}),Object(M.jsxs)("button",{id:"shipping_btn",type:"submit",className:"btn btn-block py-3",children:["Proceed to pay \u20b9",a.reduce((function(e,t){return e+t.quantity*t.price}),0).toFixed(2)]})]})})})]})},we="CREATE_ORDER_REQUEST",Ee="CREATE_ORDER_SUCCESS",Ce="CREATE_ORDER_FAIL",Re="MY_ORDERS_REQUEST",ke="MY_ORDERS_SUCCESS",Ie="MY_ORDERS_FAIL",Pe="CLEAR_ERRORS",Fe=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(r,a){var c,n,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:we}),c={headers:{"Content-Type":"application/json"}},t.next=5,L.a.post("/api/v1/order/new",e,c);case 5:n=t.sent,s=n.data,r({type:Ee,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),r({type:Ce,payload:t.t0.response.data.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,r){return t.apply(this,arguments)}}()},Ae=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:Pe});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=r(27),Le={style:{base:{fontSize:"16px"},invalid:{color:"#9e2146"}}},De=function(e){var t=e.history,r=Object(q.d)(),a=Object(Te.useStripe)(),n=Object(Te.useElements)(),s=Object(U.b)(),o=Object(U.c)((function(e){return e.auth})).user,d=Object(U.c)((function(e){return e.cart})),u=d.cartItems,j=d.shippinginfo,b=Object(U.c)((function(e){return e.neworder})).error;Object(c.useEffect)((function(){b&&(r.error(b),console.log(b),s(Ae()))}),[r,s,b]);var p={orderItems:u,shippingInfo:j,itemsPrice:u.reduce((function(e,t){return e+t.quantity*t.price}),0)},m={amount:Math.round(100*u.reduce((function(e,t){return e+t.quantity*t.price}),0))},O=function(){var e=Object(l.a)(i.a.mark((function e(c){var l,d,u,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),document.querySelector("#pay_btn").disabled=!0,e.prev=2,d={headers:{"Content-Type":"application/json"}},e.next=6,L.a.post("/api/v1/payment/process",m,d);case 6:if(l=e.sent,u=l.data.client_secret,console.log(u),a&&n){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,a.confirmCardPayment(u,{payment_method:{card:n.getElement(Te.CardNumberElement),billing_details:{name:o.name,email:o.email}}});case 13:(j=e.sent).error?(r.error(j.error.message),document.querySelector("#pay_btn").disabled=!1):"succeeded"===j.paymentIntent.status?(p.paymentInfo={id:j.paymentIntent.id,status:j.paymentIntent.status},s(Fe(p)),r.success("Order Placed Succesfully"),t.push("/")):r.error("There is some issue while payment processing"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),document.querySelector("#pay_btn").disabled=!1,r.error(e.t0.response.data.message);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:"Payment "}),Object(M.jsx)("div",{className:"row wrapper",children:Object(M.jsx)("div",{className:"col-10 col-lg-5",children:Object(M.jsxs)("form",{className:"shadow-lg",onSubmit:O,children:[Object(M.jsx)("h1",{className:"mb-4",children:"Card Info"}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"card_num_field",children:"Card Number"}),Object(M.jsx)(Te.CardNumberElement,{type:"text",id:"card_num_field",className:"form-control",options:Le})]}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"card_exp_field",children:"Card Expiry"}),Object(M.jsx)(Te.CardExpiryElement,{type:"text",id:"card_exp_field",className:"form-control",options:Le})]}),Object(M.jsxs)("div",{className:"form-group",children:[Object(M.jsx)("label",{htmlFor:"card_cvc_field",children:"Card CVC"}),Object(M.jsx)(Te.CardCvcElement,{type:"text",id:"card_cvc_field",className:"form-control",options:Le})]}),Object(M.jsxs)("button",{id:"pay_btn",type:"submit",className:"btn btn-block py-3",children:["Pay \u20b9",u.reduce((function(e,t){return e+t.quantity*t.price}),0)]})]})})})]})},Ue=r(96),qe=function(){var e=Object(q.d)(),t=Object(U.b)(),r=Object(U.c)((function(e){return e.myorders})),a=r.loading,n=r.error,s=r.orders;Object(c.useEffect)((function(){t(function(){var e=Object(l.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Re}),e.next=4,L.a.get("/api/v1/orders/me");case 4:r=e.sent,a=r.data,t({type:ke,payload:a.orders}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:Ie,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),n&&(e.error(n),t(Ae()))}),[t,e,n]);return Object(M.jsxs)(c.Fragment,{children:[Object(M.jsx)(J,{title:"My Orders"}),Object(M.jsx)("h1",{className:"my-5",children:"My Orders"}),a?Object(M.jsx)(G,{}):Object(M.jsx)(Ue.c,{data:function(){var e={columns:[{label:"Order ID",field:"id",sort:"asc"},{label:"Num of Items",field:"numOfItems",sort:"asc"},{label:"Amount",field:"amount",sort:"asc"},{label:"Status",field:"status",sort:"asc"}],rows:[]};return s.forEach((function(t){e.rows.push({id:t._id,numOfItems:t.orderItems.length,amount:"\u20b9".concat(t.itemsPrice),status:t.orderStatus&&String(t.orderStatus).includes("Delivered")?Object(M.jsx)("p",{style:{color:"green"},children:t.orderStatus}):Object(M.jsx)("p",{style:{color:"red"},children:t.orderStatus})})})),e}(),className:"px-3",bordered:!0,striped:!0,hover:!0})]})},Me=r(40),Ge=r(92),Qe=r(93),Je=r(97),We=Object(Me.combineReducers)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return{loading:!0,products:[]};case se:return{loading:!1,Products:t.payload.Products,productsCount:t.payload.productsCount,resPerPage:t.payload.resPerPage};case oe:return{loading:!1,error:t.payload};case ie:return Object(a.a)(Object(a.a)({},e),{},{error:null});default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(a.a)(Object(a.a)({},e),{},{loading:!0});case de:return{loading:!1,product:t.payload};case ue:case ie:return Object(a.a)(Object(a.a)({},e),{},{error:null});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:case O:case x:return{loading:!0,isAuthenicated:!1};case p:case h:case g:return Object(a.a)(Object(a.a)({},e),{},{loading:!1,isAuthenicated:!0,user:t.payload});case y:return{loading:!1,isAuthenicated:!1,user:null};case v:return{loading:!1,isAuthenicated:!1,user:null,error:t.payload};case N:return Object(a.a)(Object(a.a)({},e),{},{error:t.payload});case m:case f:return Object(a.a)(Object(a.a)({},e),{},{loading:!1,isAuthenicated:!1,user:null,error:t.payload});case A:return Object(a.a)(Object(a.a)({},e),{},{error:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(a.a)(Object(a.a)({},e),{},{loading:!0,isAuthenicated:!0});case S:return Object(a.a)(Object(a.a)({},e),{},{loading:!1,isUpdated:t.payload});case E:return Object(a.a)(Object(a.a)({},e),{},{isUpdated:!1});case w:return Object(a.a)(Object(a.a)({},e),{},{loading:!1,error:t.payload});case A:return Object(a.a)(Object(a.a)({},e),{},{error:t.payload});default:return e}},forgotpassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:case I:return Object(a.a)(Object(a.a)({},e),{},{loading:!0,error:null});case R:return Object(a.a)(Object(a.a)({},e),{},{loading:!1,message:t.payload});case P:return Object(a.a)(Object(a.a)({},e),{},{success:t.payload});case k:case F:return Object(a.a)(Object(a.a)({},e),{},{loading:!1,error:t.payload});case A:return Object(a.a)(Object(a.a)({},e),{},{error:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shippinginfo:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:var r=t.payload,c=e.cartItems.find((function(e){return e.product===r.product}));return c?Object(a.a)(Object(a.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.product===c.product?r:e}))}):Object(a.a)(Object(a.a)({},e),{},{cartItems:[].concat(Object(Je.a)(e.cartItems),[r])});case fe:return Object(a.a)(Object(a.a)({},e),{},{cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))});case xe:return Object(a.a)(Object(a.a)({},e),{},{shippinginfo:t.payload});default:return e}},neworder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(a.a)(Object(a.a)({},e),{},{loading:!0});case Ee:return{loading:!1,order:t.payload};case Ce:return{loading:!1,error:t.payload};case Pe:return Object(a.a)(Object(a.a)({},e),{},{error:null});default:return e}},myorders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return{loading:!0};case ke:return{loading:!1,orders:t.payload};case Ie:return{loading:!1,error:t.payload};case Pe:return Object(a.a)(Object(a.a)({},e),{},{error:null,loading:!1});default:return e}}}),Ye={cart:{cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],shippinginfo:localStorage.getItem("shippinginfo")?JSON.parse(localStorage.getItem("shippinginfo")):{}}},Be=[Ge.a],Ve=Object(Me.createStore)(We,Ye,Object(Qe.composeWithDevTools)(Me.applyMiddleware.apply(void 0,Be))),ze=r(94);var He=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),r=t[0],a=t[1];return Object(c.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("api/v1/secretapi");case 2:t=e.sent,r=t.data,a(r.secretapi);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ve.dispatch(function(){var e=Object(l.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:x}),e.next=4,L.a.get("/api/v1/me");case 4:r=e.sent,a=r.data,t({type:g,payload:a.user}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:v,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),function(){e.apply(this,arguments)}()}),[]),Object(M.jsx)(u.a,{children:Object(M.jsxs)("div",{className:"App",children:[Object(M.jsx)(te,{}),Object(M.jsx)("div",{className:"container conatiner-fluid"}),Object(M.jsx)(j.b,{path:"/",component:pe,exact:!0}),Object(M.jsx)(j.b,{path:"/search/:keyword",component:pe,exact:!0}),Object(M.jsx)(j.b,{path:"/product/:id",component:ve,exact:!0}),Object(M.jsx)(j.b,{path:"/cart",component:_e,exact:!0}),Object(M.jsx)(H,{path:"/shipping",component:Se}),r&&Object(M.jsx)(Te.Elements,{stripe:Object(ze.a)(r),children:Object(M.jsx)(H,{path:"/payment",component:De})}),Object(M.jsx)(H,{path:"/orders/me",component:qe,exact:!0}),Object(M.jsx)(j.b,{path:"/login",component:W}),Object(M.jsx)(j.b,{path:"/registers",component:Y}),Object(M.jsx)(j.b,{path:"/password/forgot",component:ye,exact:!0}),Object(M.jsx)(H,{path:"/password/reset/:token",component:Ne,exact:!0}),Object(M.jsx)(H,{path:"/me",component:B,exact:!0}),Object(M.jsx)(re,{})]})})},Ke=r(95),Xe={timeout:5e3,position:q.b.BOTTOM_CENTER,transitions:q.c.SCALE};s.a.render(Object(M.jsx)(U.a,{store:Ve,children:Object(M.jsx)(q.a,Object(a.a)(Object(a.a)({template:Ke.a},Xe),{},{children:Object(M.jsx)(He,{})}))}),document.getElementById("root"))},63:function(e,t,r){}},[[154,1,2]]]);
//# sourceMappingURL=main.1807bbff.chunk.js.map